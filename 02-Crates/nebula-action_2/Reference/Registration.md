---
title: Action Registration & Discovery
tags: [nebula, nebula-action, crate, docs, deep]
status: draft
created: 2025-08-17
---

# Action Registration & Discovery

Actions are **registered** in a crate-level registry so the engine & UI can discover them with metadata.

## Minimal registry
```rust
pub trait ActionFactory: Send + Sync {
    fn metadata(&self) -> ActionMetadata;
    fn create(&self) -> Box<dyn Action>;
}

pub struct Registry { items: Vec<Box<dyn ActionFactory>> }
impl Registry {
    pub fn register(&mut self, f: Box<dyn ActionFactory>) { self.items.push(f); }
    pub fn list(&self) -> &[Box<dyn ActionFactory>] { &self.items }
}
```

## Metadata rules
- `id` must be stable and globally unique: `namespace.kind.name` (e.g., `http.request`).
- `version` increments when the **contract** changes (params/output/state).
- `parameters`/`outputs` are JSON Schemas generated by `nebula-parameter`/serde.
- `description` is used by the UI & Hub search.

## Export pattern
```rust
pub fn register_all(reg: &mut Registry) {
    reg.register(Box::new(HttpRequestActionFactory));
    reg.register(Box::new(PostgresSupplyFactory));
    reg.register(Box::new(KafkaTriggerFactory));
    // ...
}
```
